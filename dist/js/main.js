(()=>{"use strict";var e={420:()=>{window.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("MainBurgerMenuToggler"),t=document.querySelector(".main-header__menu-button"),n=document.getElementById("HeaderMenu"),o=document.querySelector(".main-header__menu-list"),i=!1;e.addEventListener("click",(function(){t.classList.toggle("toggler--active"),i?(o.classList.remove("smoothlyShow"),o.classList.add("smoothlyHide"),setTimeout((function(){o.classList.add("collapse")}),300),n.classList.remove("menu--opened"),i=!1):(n.classList.add("menu--opened"),o.classList.remove("collapse"),o.classList.remove("smoothlyHide"),o.classList.add("smoothlyShow"),i=!0)}));var s=document.querySelectorAll(".sidebar__link--spoiler"),a=function(e){return sessionStorage.getItem(e)},c=function(e,t,n,o){!function(e,t){sessionStorage.setItem(e.id,t)}(e,t),function(e,t,n){var o=e.parentNode.querySelector(".sidebar__list");o.style.height=function(e,t){if(!t)return 0;var n=e.querySelectorAll(".sidebar__elem"),o=0;return n.forEach((function(e){var t=e.getBoundingClientRect().height;o+=t})),o}(o,t)+"px",o.style.transition=n}(e,o,n),function(e,t,n){var o=e.parentNode.querySelector(".sidebar__link-icon");"open"===t?o.classList.remove("rotate-arrow"):"close"===t&&o.classList.add("rotate-arrow"),o.style.transition="all "+n}(e,t,n)};s.forEach((function(e){return e.addEventListener("click",(function(e){var t=e.target,n=a(t.id);n&&"close"!==n?"open"===n&&c(t,"close","0.7s",0):c(t,"open","0.7s",!0)}))}));var r=function(){s.forEach((function(e){var t=a(e.id);"close"===t?c(e,"close","0s",0):"open"===t&&c(e,"open","0s",!0)}))};r();var l=document.getElementById("LeftBurgerMenuToggler"),u=document.querySelector(".main-header__menu-button--left"),d=document.getElementById("Sidebar"),f=!1;if(!l)return!1;l.addEventListener("click",(function(){f?(u.classList.remove("menu--left"),d.classList.remove("left-menu--opened"),setTimeout((function(){d.classList.remove("left-menu--max-height")}),500),f=!1):(r(),u.classList.add("menu--left"),d.classList.add("left-menu--max-height"),setTimeout((function(){d.classList.add("left-menu--opened")}),100),f=!0)}))}))},973:(e,t,n)=>{var o,i=n(205),s=i(n(135)),a=i(n(264)),c="purchases_notices",r="offers_notices",l="auctions_notices",u="contracts_notices",d="deals_notices",f="finance_notices";window.addEventListener("DOMContentLoaded",(function(){var e=[],t=(document.querySelector(".main-menu__dialogs"),document.getElementById("dialogNewMessageIcon")),n=$("#PurchasesQty"),i=$("#PurchasesNotice"),p=$("#OffersQty"),m=$("#OffersNotice"),g=$("#AuctionsQty"),h=$("#AuctionsNotice"),v=$("#ContractsQty"),y=$("#ContractsNotice"),L=$("#DealsQty"),N=$("#DealsNotice"),w=$("#FinancesQty"),b=$("#FinansesNotice");function E(){return(E=(0,a.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=(new signalR.HubConnectionBuilder).withUrl("/Notifications/NotificationHub").build()).onclose((0,a.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(1e4);case 2:case"end":return e.stop()}}),e)})))),o.on("UpdateNotificationCounters",(function(e){S(e.unreadDialogCount),D(n,e.purchaseNoticeCount),D(p,e.offersNoticeCount),D(g,e.auctionNoticeCount),D(v,e.updatedContractCount),D(L,e.updatedDealCount),D(w,e.financeNoticeCount),e.sumCount>0?q():I()})),o.on("ReceiptedNewMessage",(function(t){var n="#dialog_"+t;e.includes(n)||($(n).find("span.dialogs-title").after('<div class="dialogs-title dialogs-new-message-trigger--temp"><span class="dialog-new-message-button--temp">Новое сообщение</span></div>'),$(n).find("img").attr("src","/images/convert.svg"),e.push(n));S(e.length)})),o.on("DialogReaded",(function(t){var n="#dialog_"+t;e.includes(n)&&e.splice(n),S(e.length)})),o.on("PurchaseNotification",(function(){A(n),q()})),o.on("OfferNotification",(function(){A(p),q()})),o.on("AuctionNotification",(function(){A(g),q()})),o.on("ContractNotification",(function(){A(v),q()})),o.on("DealNotification",(function(){A(L),q()})),o.on("FinanceNotification",(function(){A(w),q()})),o.on("DisplayPurchasesNotices",(function(e){B(i,e),D(n,e)})),o.on("DisplayOffersNotices",(function(e){B(m,e),D(p,e)})),o.on("DisplayAuctionsNotices",(function(e){B(h,e),D(g,e)})),o.on("DisplayContractsNotices",(function(e){B(y,e),D(v,e)})),o.on("DisplayDealsNotices",(function(e){B(N,e),D(L,e)})),o.on("DisplayFinanceNotices",(function(e){e.forEach((function(e){return console.log(e.isNew)})),B(b,e),D(w,e)})),t.next=19,_();case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(){return k.apply(this,arguments)}function k(){return(k=(0,a.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o.logging=!0,e.next=4,o.start();case 4:console.log("notifications connected."),o.invoke("GetNotifications").catch((function(e){return console.log(e.toString())})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function x(e,t){return C.apply(this,arguments)}function C(){return(C=(0,a.default)(s.default.mark((function e(t,n){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.start();case 3:n?(console.log("notice hub reloading..."),window.location.reload(!0)):console.log("notice hub connected."),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),setTimeout((function(){return x(t,!0)}),t);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function S(e){if(!t)return!1;e>0?t.classList.remove("collapse"):t.classList.add("collapse")}function D(e,t){t>0?e.html(t):e.html("0")}function A(e){var t=parseInt(e.html());t++,e.html(t)}function B(e,t){var n,o;t.length||(n=e,(o=document.createElement("li")).textContent="Оповещений нет",o.classList.add("drop-card__link"),n.append(o)),t.reverse().forEach((function(t){var n=document.createElement("li");n.classList.add("drop-card__item"),t.isNew&&n.classList.add("item--isNew");var o=document.createElement("a");if(o.classList.add("drop-card__link"),o.href="/Notification/RedirectToSource?id="+t.id,o.textContent=t.title,t.message){var i=document.createElement("span");i.classList.add("drop-card__message"),i.textContent=t.message,o.appendChild(i)}n.appendChild(o),e.append(n)}))}function q(){$("#DropdownToggler").addClass("pulsingButton")}function I(){$("#DropdownToggler").removeClass("pulsingButton")}var T=!1,M=!1,O=!1,R=!1,G=!1,H=!1;if(document.getElementById("ReadAllNotices")){document.querySelectorAll(".drop-card").forEach((function(e){e.addEventListener("click",X)})),document.getElementById("ReadAllNotices").addEventListener("click",(function(){o.invoke("ReadAll").catch((function(e){return console.log(e.toString())}))}));var P=document.getElementById("DropdownToggler"),Q=document.getElementById("DropdownMenu"),F=document.querySelector(".fa-bell");P.addEventListener("click",(function(){var e=P.getAttribute("data-state");switch(console.log(e),e){case"closed":Q.classList.remove("collapse"),Q.classList.remove("smoothlyHide"),Q.classList.add("smoothlyShow"),P.setAttribute("data-state","opened");break;case"opened":Y()}})),document.addEventListener("click",(function(e){e.target.closest("#DropdownMenu")||e.target===P||e.target===F||Y()}));var j=document.querySelectorAll(".toggler--js"),U=document.querySelectorAll(".drop-card__qty"),z=null,J=null;j.forEach((function(e){e.addEventListener("click",(function(){var t="card-"+e.dataset.id,n=(z=document.querySelector("[data-id="+t+"]")).getAttribute("data-state");"closed"===n?Z(z,200,"opened"):"opened"===n&&Z(z,0,"closed"),J&&J!==z&&Z(J,0,"closed"),J=z,setTimeout((function(){var e,t;e=+U.length,t=0,U.forEach((function(e){"0"==e.textContent&&t++})),t>=e&&P.classList.remove("pulsingButton")}),1500)}))}));var K=document.getElementById("headerOrganizationName");if(!K)return!1;var V=K.textContent;if(V.length>39){var W=V.slice(0,39);K.textContent=W+"..."}!function(){E.apply(this,arguments)}()}function X(){this.getAttribute("data-type").split(" ").forEach((function(e){!function(e){var t;switch(e){case c:if(T)return;T=!0,t="GetPurchasesNotices";break;case r:if(M)return;M=!0,t="GetOffersNotices";break;case l:if(O)return;O=!0,t="GetAuctionsNotices";break;case u:if(R)return;R=!0,t="GetContractsNotices";break;case d:if(G)return;G=!0,t="GetDealsNotices";break;case f:if(H)return;H=!0,t="GetFinanceNotices";break;default:return}o.invoke(t).catch((function(e){return console.log(e.toString())}))}(e)}))}function Y(){Q.classList.remove("smoothlyShow"),Q.classList.add("smoothlyHide"),setTimeout((function(){Q.classList.add("collapse")}),300),P.setAttribute("data-state","closed")}function Z(e,t,n){e.style.height=t+"px",e.setAttribute("data-state",n)}}))},32:(e,t,n)=>{n(973),n(420)}},t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,n.x=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0},t=[[32,236]],o=e=>{},i=(i,s)=>{for(var a,c,[r,l,u,d]=s,f=0,p=[];f<r.length;f++)c=r[f],n.o(e,c)&&e[c]&&p.push(e[c][0]),e[c]=0;for(a in l)n.o(l,a)&&(n.m[a]=l[a]);for(u&&u(n),i&&i(s);p.length;)p.shift()();return d&&t.push.apply(t,d),o()},s=self.webpackChunk=self.webpackChunk||[];function a(){for(var o,i=0;i<t.length;i++){for(var s=t[i],a=!0,c=1;c<s.length;c++){var r=s[c];0!==e[r]&&(a=!1)}a&&(t.splice(i--,1),o=n(n.s=s[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),o}s.forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s));var c=n.x;n.x=()=>(n.x=c||(e=>{}),(o=a)())})();n.x()})();